---
title: API - Communicate Properly
header:
  image: /assets/images/elena-koycheva-bGeupv246bM-unsplash-x1200.jpg
tags:
  - ruby
  - API
  - REST
  - grape
  - swagger
  - architecture
classes: wide
---

**Improve your communication**

### The intro
*Communication - the ability to express our thoughts and explain our actions.*
* is an important feat that made humanity what it is today,
* is key to maintaining healthy relationships - both business and personal,
* can be problematic, and - if done bad - lead to a catastrophe.

<!-- ![Scope mess in a model](/assets/images/rails-scopes-example.jpg) -->

### API - what is it and why would you need it
Communication is key when building applications that are based on microservices
or external services - which is bound to happen to your project sooner or later.
Maintaining a healthy architecture and following rules when writing an API is
very important. API stands for *Application Programming Interface* and it's the way
the application is setup to communicate with other applications - it's what the
app can say and what the app can comprehend when it gets a message.

To achieve this effect in a Rails app we could add a new controller and make its'
actions do something when they are called (or even better - make use of *Rack* -
interface for handling HTTP requests and responses) - but in the end it can be a
lot of work. You will need to think of how to authorize requests, handle params,
configure the interface and present objects requested and do it all manually.

Instead of starting from scratch a good idea is to utilize [*Grape*](https://github.com/ruby-grape/grape) -
a framework which can run on Rack or Rails, which provides a *DSL - Domain Server Language -*
for developing RESTful APIs. It also allows for easily creating a documentation
for the API which helps other developers use your API.

*Example API route/controller-like construct similar to index action of orders controller:*
```ruby
module API
  module V1
    class Orders < Grape::API
      include API::V1::Defaults

      resource :orders, desc: "Order resource" do

        desc "Get list of orders for customer",
          entity: Entities::Order
        params do
          requires :customer_id, desc: "Customer ID", type: Integer
        end

        get do
          authorize!
          customer = Customer.find_by_id(params[:customer_id])
          return response_error!("No such customer.") unless customer
          orders = Order.for_customer(customer)

          present orders, with: Entities::Order
        end
      end
    end
  end
end
```
